---
# Configure tmux

- name: Create tmux configuration
  copy:
    dest: /home/ubuntu/.tmux.conf
    owner: ubuntu
    group: ubuntu
    mode: '0644'
    content: |
      # tmux configuration
      # Keep default prefix key Ctrl-b (no changes needed)
      set-option -g prefix C-b
      bind-key C-b send-prefix
      
      # Split panes using | and -
      bind | split-window -h
      bind - split-window -v
      unbind '"'
      unbind %
      
      # Enable mouse mode
      set -g mouse on
      
      # Start windows and panes at 1, not 0
      set -g base-index 1
      setw -g pane-base-index 1
      
      # Reload config file
      bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"
      
      # Don't rename windows automatically
      set-option -g allow-rename off
      
      # Status bar customization (modern tmux syntax)
      set -g status-style 'bg=black,fg=white'
      set -g status-left '[#S] '
      set -g status-right '%Y-%m-%d %H:%M'
      
      # Highlight active window (modern tmux syntax)
      set -g window-status-current-style 'bg=red,fg=white'
      
      # Enable 256 colors
      set -g default-terminal "screen-256color"
  become: yes